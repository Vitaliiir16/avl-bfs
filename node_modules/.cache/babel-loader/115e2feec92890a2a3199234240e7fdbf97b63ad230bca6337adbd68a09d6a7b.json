{"ast":null,"code":"export const initializeDFS = (nodes, endNodeId) => {\n  const updatedNodes = nodes.map(n => ({\n    ...n,\n    state: 'unvisited'\n  }));\n  return {\n    nodes: updatedNodes,\n    stepHistory: [],\n    currentNode: null,\n    targetNode: endNodeId,\n    stack: []\n  };\n};\nexport const startDFSProcess = (startId, endId, setIsRunning, setIsPaused, setTargetNode, setStack, setNodes) => {\n  setIsRunning(true);\n  setIsPaused(false);\n  setTargetNode(endId);\n  setNodes(p => p.map(n => ({\n    ...n,\n    state: 'unvisited'\n  })));\n  setStack([startId]);\n};\nfunction findCandidate(stack, nodesRef, setStack, isPausedRef, setIsRunning) {\n  while (true) {\n    if (stack.length === 0) {\n      alert('Цільова вершина не знайдена');\n      setIsRunning(false);\n      return null;\n    }\n    if (isPausedRef.current) return null;\n    const c = stack[stack.length - 1];\n    const cNode = nodesRef.current.find(n => n.id === c);\n    if (!cNode || cNode.state !== 'unvisited') {\n      setStack(prev => prev.slice(0, -1));\n      continue;\n    }\n    return c;\n  }\n}\nexport const performDFSStep = async ({\n  nodesRef,\n  edges,\n  stack,\n  setStack,\n  updateNodeState,\n  setStepHistory,\n  delay,\n  targetNode,\n  isPausedRef,\n  setIsRunning\n}) => {\n  const candidate = findCandidate(stack, nodesRef, setStack, isPausedRef, setIsRunning);\n  if (candidate === null) return;\n  updateNodeState(candidate, 'processing');\n  setStepHistory(h => [...h, candidate]);\n  await new Promise(r => setTimeout(r, delay));\n  if (candidate === targetNode) {\n    updateNodeState(candidate, 'target');\n    alert('Знайдено кінцеву вершину V' + targetNode);\n    setIsRunning(false);\n    return;\n  }\n  const allNeighbors = edges.filter(e => e.from === candidate).map(e => e.to);\n  const unvisitedNeighbors = allNeighbors.filter(id => {\n    const nn = nodesRef.current.find(n => n.id === id);\n    return nn && nn.state === 'unvisited';\n  });\n  setStack(s => [...s, ...unvisitedNeighbors.reverse()]);\n  updateNodeState(candidate, 'visited');\n  await new Promise(r => setTimeout(r, delay));\n};\nexport const pauseDFSProcess = (isRunning, setIsPaused, isPaused) => {\n  if (!isRunning) return;\n  setIsPaused(!isPaused);\n};\nexport const undoDFSProcess = (stepHistory, setStepHistory, setNodes, setStack, setCurrentNode) => {\n  if (stepHistory.length === 0) {\n    alert('Немає попередніх кроків для відкату.');\n    return;\n  }\n  const newHistory = [...stepHistory];\n  const lastVisitedNode = newHistory.pop();\n  setNodes(prev => prev.map(n => n.id === lastVisitedNode ? {\n    ...n,\n    state: 'unvisited'\n  } : n));\n  setStepHistory(newHistory);\n  setStack(prev => [...prev, lastVisitedNode]);\n  const previousNode = newHistory[newHistory.length - 1] || null;\n  setCurrentNode(previousNode);\n};\nexport const resetDFSProcess = (setNodes, setStepHistory, setCurrentNode, setTargetNode, setIsRunning, setIsPaused, setStack) => {\n  setNodes(prev => prev.map(n => ({\n    ...n,\n    state: 'unvisited'\n  })));\n  setStepHistory([]);\n  setCurrentNode(null);\n  setTargetNode(null);\n  setIsRunning(false);\n  setIsPaused(false);\n  setStack([]);\n};","map":{"version":3,"names":["initializeDFS","nodes","endNodeId","updatedNodes","map","n","state","stepHistory","currentNode","targetNode","stack","startDFSProcess","startId","endId","setIsRunning","setIsPaused","setTargetNode","setStack","setNodes","p","findCandidate","nodesRef","isPausedRef","length","alert","current","c","cNode","find","id","prev","slice","performDFSStep","edges","updateNodeState","setStepHistory","delay","candidate","h","Promise","r","setTimeout","allNeighbors","filter","e","from","to","unvisitedNeighbors","nn","s","reverse","pauseDFSProcess","isRunning","isPaused","undoDFSProcess","setCurrentNode","newHistory","lastVisitedNode","pop","previousNode","resetDFSProcess"],"sources":["D:/kr-var-18-rbt-dfs/src/components/Graph/algorithms/dfs.js"],"sourcesContent":["export const initializeDFS = (nodes, endNodeId) => {\r\n  const updatedNodes = nodes.map(n => ({...n, state:'unvisited'}))\r\n  return {nodes: updatedNodes, stepHistory: [], currentNode: null, targetNode: endNodeId, stack: []}\r\n}\r\n\r\nexport const startDFSProcess = (startId, endId, setIsRunning, setIsPaused, setTargetNode, setStack, setNodes) => {\r\n  setIsRunning(true)\r\n  setIsPaused(false)\r\n  setTargetNode(endId)\r\n  setNodes(p=>p.map(n=>({...n,state:'unvisited'})))\r\n  setStack([startId])\r\n}\r\n\r\nfunction findCandidate(stack, nodesRef, setStack, isPausedRef, setIsRunning) {\r\n  while (true) {\r\n    if (stack.length === 0) {\r\n      alert('Цільова вершина не знайдена')\r\n      setIsRunning(false)\r\n      return null\r\n    }\r\n    if (isPausedRef.current) return null\r\n    const c = stack[stack.length - 1]\r\n    const cNode = nodesRef.current.find(n=>n.id===c)\r\n    if (!cNode || cNode.state !== 'unvisited') {\r\n      setStack(prev=>prev.slice(0,-1))\r\n      continue\r\n    }\r\n    return c\r\n  }\r\n}\r\n\r\nexport const performDFSStep = async ({nodesRef, edges, stack, setStack, updateNodeState, setStepHistory, delay, targetNode, isPausedRef, setIsRunning}) => {\r\n  const candidate = findCandidate(stack, nodesRef, setStack, isPausedRef, setIsRunning)\r\n  if (candidate === null) return\r\n  updateNodeState(candidate, 'processing')\r\n  setStepHistory(h=>[...h,candidate])\r\n  await new Promise(r=>setTimeout(r,delay))\r\n  if (candidate === targetNode) {\r\n    updateNodeState(candidate, 'target')\r\n    alert('Знайдено кінцеву вершину V' + targetNode)\r\n    setIsRunning(false)\r\n    return\r\n  }\r\n  const allNeighbors = edges.filter(e=>e.from===candidate).map(e=>e.to)\r\n  const unvisitedNeighbors = allNeighbors.filter(id=>{\r\n    const nn = nodesRef.current.find(n=>n.id===id)\r\n    return nn && nn.state==='unvisited'\r\n  })\r\n  setStack(s => [...s,...unvisitedNeighbors.reverse()])\r\n  updateNodeState(candidate,'visited')\r\n  await new Promise(r=>setTimeout(r,delay))\r\n}\r\n\r\nexport const pauseDFSProcess = (isRunning, setIsPaused, isPaused) => {\r\n  if (!isRunning) return\r\n  setIsPaused(!isPaused)\r\n}\r\n\r\nexport const undoDFSProcess = (stepHistory, setStepHistory, setNodes, setStack, setCurrentNode) => {\r\n  if (stepHistory.length===0) {\r\n    alert('Немає попередніх кроків для відкату.')\r\n    return\r\n  }\r\n  const newHistory = [...stepHistory]\r\n  const lastVisitedNode = newHistory.pop()\r\n  setNodes(prev=>prev.map(n=>n.id===lastVisitedNode?{...n,state:'unvisited'}:n))\r\n  setStepHistory(newHistory)\r\n  setStack(prev=>[...prev,lastVisitedNode])\r\n  const previousNode = newHistory[newHistory.length-1]||null\r\n  setCurrentNode(previousNode)\r\n}\r\n\r\nexport const resetDFSProcess = (setNodes, setStepHistory, setCurrentNode, setTargetNode, setIsRunning, setIsPaused, setStack) => {\r\n  setNodes(prev=>prev.map(n=>({...n,state:'unvisited'})))\r\n  setStepHistory([])\r\n  setCurrentNode(null)\r\n  setTargetNode(null)\r\n  setIsRunning(false)\r\n  setIsPaused(false)\r\n  setStack([])\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}